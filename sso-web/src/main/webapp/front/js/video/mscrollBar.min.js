function MxScrollBar(t){this.oScrBar=EventUtil.EU.getId(t),this.settings={Anim:!0,Rang:50,scrH:"auto",scrPos:"auto",callbacks:function(){}}}var EventUtil=EventUtil||{};EventUtil.EU={addHandler:function(t,e,o){t.addEventListener?t.addEventListener(e,o,!1):t.attachEvent?t.attachEvent("on"+e,o):t["on"+e]=o},removeHandler:function(t,e,o){t.removeEventListener?t.removeEventListener(e,o,!1):t.detachEvent?t.detachEvent("on"+e,o):t["on"+e]=null},getEvent:function(t){return t?t:window.event},getTarget:function(t){return t.target||t.srcElement},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},getId:function(t){return document.getElementById(t)}},MxScrollBar.prototype={constructor:MxScrollBar,init:function(t){var e=this;t=t||{};for(var o in e.settings)"undefined"==typeof t[o]?t[o]=e.settings[o]:e.settings[o]=t[o];e.addScrEle(),e.dragHFn(),e.oMaxH<0?(e.dragDropFn().removedragEvt(),e.clickFn().removeclickEvt(),e.scrollEFn().removeScrollEvt(),e.oDragMain.style.cssText="display:none;"):(e.dragDropFn().dragEvent(),e.clickFn().clickEvt(),e.scrollEFn().scrollEvt(),e.oDragMain.style.cssText="display:block;",e.setScrollT())},addScrEle:function(){var t=this,e=document.createElement("div"),o="",n="",r=100*Math.random(),a=t.oScrBar.innerHTML;o='<div class="mx-ScrollBox" style="position:relative; height:100%; overflow:hidden; max-width:100%;"><div class="mx_container" style="position: absolute;top: 0;left: 0;width: 100%;height: auto;overflow: hidden;">'+a+"</div></div>",n='<div class="mx-draggerCon"><div class="mx-draggerCn Draggable'+r+'"></div></div>',t.tardrag="Draggable"+r,e.innerHTML=n,t.oScrBar.innerHTML=o,t.oScrBox=t.oScrBar.children[0],t.oScrCn=t.oScrBox.getElementsByTagName("div")[0],t.oMaxH=t.oScrCn.offsetHeight-t.oScrBox.offsetHeight,t.oDragMain=e.children[0],t.oDragCn=t.oDragMain.getElementsByTagName("div")[0],t.oScrBar.appendChild(e)},dragHFn:function(){var t=this,e=Math.round(t.oScrBox.offsetHeight/t.oScrCn.offsetHeight*1e4)/100,o=t.settings.scrH,n=t.oDragCn;if("string"==typeof o&&"auto"===o)n.style.height=5>=e?"5%":e>=100?"98%":e+"%";else{if("number"!=typeof o)throw new Error("options.scrH 参数不对");n.style.height=1>o?"2px":o>=parseInt(t.oScrBox.offsetHeight)?t.oScrBox.offsetHeight-10+"px":o+"px"}},scrollEFn:function(){function t(t){t=EventUtil.EU.getEvent(t),e=t.wheelDelta?t.wheelDelta:40*-t.detail,n=e>0?!0:!1,o.setTop(n?o.oDragCn.offsetTop-o.settings.Rang:o.oDragCn.offsetTop+o.settings.Rang),EventUtil.EU.preventDefault(t)}var e,o=this,n=!0;return{scrollEvt:function(){EventUtil.EU.addHandler(o.oScrBox,"mousewheel",t),EventUtil.EU.addHandler(o.oScrBox,"DOMMouseScroll",t),EventUtil.EU.addHandler(o.oDragMain,"mousewheel",t),EventUtil.EU.addHandler(o.oDragMain,"DOMMouseScroll",t)},removeScrollEvt:function(){EventUtil.EU.removeHandler(o.oScrBox,"mousewheel",t),EventUtil.EU.removeHandler(o.oScrBox,"DOMMouseScroll",t),EventUtil.EU.removeHandler(o.oDragMain,"mousewheel",t),EventUtil.EU.removeHandler(o.oDragMain,"DOMMouseScroll",t)}}},clickFn:function(){function t(t){t=EventUtil.EU.getEvent(t);var o=EventUtil.EU.getTarget(t),n=document.documentElement.scrollTop||document.body.scrollTop,r=t.clientY+n-(e.oDragMain.getBoundingClientRect().top+n),a=(r-e.oDragCn.offsetHeight/2).toFixed(0);o.className.indexOf(e.tardrag)>-1?EventUtil.EU.stopPropagation(t):e.setTop(a)}var e=this;return{clickEvt:function(){EventUtil.EU.addHandler(e.oDragMain,"click",t)},removeclickEvt:function(){EventUtil.EU.removeHandler(e.oDragMain,"click",t)}}},dragDropFn:function(){function t(t){t=EventUtil.EU.getEvent(t);var r=EventUtil.EU.getTarget(t),a=document.documentElement.scrollTop||document.body.scrollTop;switch(t.type){case"mousedown":r.className.indexOf(e.tardrag)>-1&&(o=r,EventUtil.EU.preventDefault(t),EventUtil.EU.stopPropagation(t),n=t.clientY+a-o.offsetTop,o.setCapture&&o.setCapture());break;case"mousemove":if(null!==o){var i=t.clientY+a-n;e.setTop(i)}break;case"mouseup":e.oDragCn.setCapture&&e.oDragCn.releaseCapture(),o=null}}var e=this,o=null,n=0;return{dragEvent:function(){EventUtil.EU.addHandler(document,"mousedown",t),EventUtil.EU.addHandler(document,"mousemove",t),EventUtil.EU.addHandler(document,"mouseup",t)},removedragEvt:function(){EventUtil.EU.removeHandler(document,"mousedown",t),EventUtil.EU.removeHandler(document,"mousemove",t),EventUtil.EU.removeHandler(document,"mouseup",t)}}},setScrollT:function(){var t=this,e=t.settings.scrPos;if("string"!=typeof e||"auto"!==e){if("number"!=typeof e)throw new error("error");var o=-Math.abs(e);-o>=t.oScrCn.offsetHeight-t.oScrBox.offsetHeight&&(o=-(t.oScrCn.offsetHeight-t.oScrBox.offsetHeight));var n=o/(t.oScrCn.offsetHeight-t.oScrBox.offsetHeight),r=-(n*(t.oDragMain.offsetHeight-t.oDragCn.offsetHeight)).toFixed(0);t.settings.Anim?(t.buttur(t.oScrCn,{top:o}),t.buttur(t.oDragCn,{top:r})):(t.oScrCn.style.top=o+"px",t.oDragCn.style.top=r+"px"),t.settings.callbacks.call(t,o)}},setTop:function(t){var e=this;0>=t?t=0:t>=e.oDragMain.offsetHeight-e.oDragCn.offsetHeight&&(t=e.oDragMain.offsetHeight-e.oDragCn.offsetHeight);var o=t/(e.oDragMain.offsetHeight-e.oDragCn.offsetHeight),n=-o*e.oMaxH,r=n.toFixed(0);e.settings.Anim?(e.buttur(e.oDragCn,{top:t}),e.buttur(e.oScrCn,{top:r})):(e.oDragCn.style.top=t+"px",e.oScrCn.style.top=r+"px"),e.settings.callbacks.call(e,r)},buttur:function(t,e){window.clearTimeout(t.timer);var o=this,n=null;for(direc in e){var r=direc.toLowerCase(),a="offset"+r.substr(0,1).toUpperCase()+r.substring(1).toLowerCase(),i=e[direc],l=(i-t[a])/8;l=l>=0?Math.ceil(l):Math.floor(l),t.style[r]=t[a]+l+"px",n+=l}n&&("function"==typeof fnCallback?fnCallback.call(t):t.timer=window.setTimeout(function(){o.buttur(t,e)},20))}};